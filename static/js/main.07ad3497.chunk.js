(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/default.141521f9.jpg"},,,,,,,,,,function(e,t,a){e.exports=a(42)},,,,,,function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t){sessionStorage.setItem("discoverResults",JSON.stringify([])),sessionStorage.setItem("discoverPage",1),sessionStorage.setItem("searchQuery",""),sessionStorage.setItem("searchResults",JSON.stringify([])),sessionStorage.setItem("searchPage",1),localStorage.getItem("collections")||localStorage.setItem("collections",JSON.stringify([])),localStorage.getItem("ratings")||localStorage.setItem("ratings",JSON.stringify([]))},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=(a(28),a(4)),i=a(5),l=a(7),u=a(6),m=a(8),g=a(44),p=a(45),d=a(20),h=a(43);a(29);var v=function(){return r.a.createElement("header",{className:"header__container"},r.a.createElement("ul",{className:"header__menu"},r.a.createElement("li",{className:"header__menu-item"},r.a.createElement(h.a,{className:"header__menu-link",activeClassName:"header__active-link",exact:!0,to:"/"},"Descubrir")),r.a.createElement("li",{className:"header__menu-item"},r.a.createElement(h.a,{className:"header__menu-link",activeClassName:"header__active-link",to:"/search"},"Buscar")),r.a.createElement("li",{className:"header__menu-item"},r.a.createElement(h.a,{className:"header__menu-link",activeClassName:"header__active-link",to:"/collections"},"Mis colecciones"))))},f=a(2),b=a.n(f),E=a(9),S=a(16),N=(a(35),a(12)),_=a.n(N),O=function(e){var t=e.results;return r.a.createElement("ul",{className:"showcase__container"},0===t.length?r.a.createElement("div",{className:"no-results"},"Sin resultados. Realiza una b\xfasqueda, por favor"):t.map(function(e){return r.a.createElement(S.a,{key:e.id,className:"link",to:"/movie/".concat(e.id)},r.a.createElement("li",{key:e.id,className:"showcase__movie"},r.a.createElement("img",{className:"showcase__img",src:e.poster_path?"https://image.tmdb.org/t/p/w185".concat(e.poster_path):_.a,alt:e.title}),r.a.createElement("div",{className:"showcase__title"},e.title)))}))};a(36);var y=function(e){return r.a.createElement("div",{className:"pagination__container"},1===e.page?null:r.a.createElement("button",{type:"submit",className:"button",value:"-1",onClick:e.onChangePage},"Anterior"),r.a.createElement("div",{className:"pagination__current-page"},e.page),r.a.createElement("button",{type:"submit",className:"button",value:"1",onClick:e.onChangePage},"Siguiente"))},C="https://api.themoviedb.org/3",w="687ccf3a676569dd642e0706e30a6dae",I={discover:function(){var e=Object(E.a)(b.a.mark(function e(t){var a,n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C).concat("/discover/movie","?api_key=").concat(w,"&language=").concat("es-ES","&page=").concat(t,"&sort_by=popularity.desc"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,r=n.results,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),search:function(){var e=Object(E.a)(b.a.mark(function e(t,a){var n,r,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return","");case 2:return e.next=4,fetch("".concat(C).concat("/search/movie","?api_key=").concat(w,"&language=").concat("es-ES","&query=").concat(t,"&page=").concat(a));case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,c=r.results,e.abrupt("return",c);case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),movie:function(){var e=Object(E.a)(b.a.mark(function e(t){var a,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C).concat("/movie","/").concat(t,"?api_key=").concat(w,"&language=").concat("es-ES"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={results:JSON.parse(sessionStorage.getItem("discoverResults")),page:parseInt(sessionStorage.getItem("discoverPage")),loading:!0},a.handleChangePage=function(){var e=Object(E.a)(b.a.mark(function e(t){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.page+parseInt(t.target.value),e.next=3,I.discover(n);case 3:r=e.sent,sessionStorage.setItem("discoverResults",JSON.stringify(r)),sessionStorage.setItem("discoverPage",JSON.stringify(n)),a.setState({results:r,page:n});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.discover(this.state.page);case 2:t=e.sent,this.setState({results:t,loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.results;return this.state.loading?r.a.createElement("div",{className:"no-results"},"Cargando. Espera, por favor."):r.a.createElement(r.a.Fragment,null,r.a.createElement(y,{page:this.state.page,onChangePage:this.handleChangePage}),r.a.createElement(O,{results:e,parent:"discover"}))}}]),t}(r.a.Component),j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={query:sessionStorage.getItem("searchQuery"),results:JSON.parse(sessionStorage.getItem("searchResults")),page:parseInt(sessionStorage.getItem("searchPage")),loading:!1},a.handleChange=function(e){sessionStorage.setItem("searchQuery",e.target.value),a.setState({query:e.target.value})},a.handleSubmit=function(){var e=Object(E.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0}),e.next=4,I.search(a.state.query,1);case 4:n=e.sent,sessionStorage.setItem("searchResults",JSON.stringify(n)),sessionStorage.setItem("searchPage",1),a.setState({results:n,page:1,loading:!1});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChangePage=function(){var e=Object(E.a)(b.a.mark(function e(t){var n,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.page+parseInt(t.target.value),e.next=3,I.search(a.state.query,n);case 3:r=e.sent,sessionStorage.setItem("searchResults",JSON.stringify(r)),sessionStorage.setItem("searchPage",JSON.stringify(n)),a.setState({results:r,page:n});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.results;return this.state.loading?r.a.createElement("div",{className:"no-results"},"Cargando. Espera, por favor."):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"text-input",type:"text",value:this.state.query,placeholder:"Buscar...",onChange:this.handleChange}),r.a.createElement("button",{className:"button",type:"submit"},"Buscar")),0===e.length?null:r.a.createElement(y,{page:this.state.page,onChangePage:this.handleChangePage}),r.a.createElement(O,{results:e,parent:"search"}))}}]),t}(r.a.Component),k=a(21),J=(a(37),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={movie:{},toggle:!1,newCollection:"",existingCollection:JSON.parse(localStorage.getItem("collections"))[0]?JSON.parse(localStorage.getItem("collections"))[0].name:"",selectedOption:"new",selectedCollection:"",loading:!0},a.handleToggle=function(){a.setState({toggle:!a.state.toggle})},a.handleInputChange=function(e){a.setState({newCollection:e.target.value,selectedCollection:"new"===a.state.selectedOption?e.target.value:a.state.selectedCollection})},a.handleSelectChange=function(e){a.setState({existingCollection:e.target.value,selectedCollection:"existing"===a.state.selectedOption?e.target.value:a.state.selectedCollection})},a.handleOptionChange=function(e){a.setState({selectedOption:e.target.id,selectedCollection:e.target.value})},a.handleAddMovie=function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("collections"));if(""!==a.state.selectedCollection)if("new"===a.state.selectedOption&&t.find(function(e){return e.name===a.state.selectedCollection}))alert("Error: Coleccci\xf3n duplicada. No se ha creado ninguna colecci\xf3n");else{if("existing"===a.state.selectedOption)if(t.find(function(e){return e.name===a.state.selectedCollection}).movies.find(function(e){return e.id===a.state.movie.id}))return void alert("Error: Pel\xedcula duplicada. No se ha a\xf1adido ninguna pel\xedcula");"existing"===a.state.selectedOption?t.find(function(e){return e.name===a.state.selectedCollection}).movies.push(a.state.movie):t.push({id:t.length,name:a.state.selectedCollection,movies:[Object(k.a)({},a.state.movie)]}),localStorage.setItem("collections",JSON.stringify(t)),a.setState({newCollection:"",existingCollection:JSON.parse(localStorage.getItem("collections"))[0]?JSON.parse(localStorage.getItem("collections"))[0].name:"",toggle:!1})}else alert("Error: indique un nombre para la colecci\xf3n")},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.movie(this.props.match.params.id);case 2:t=e.sent,this.setState({movie:t,loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.movie,t=this.state.loading;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"no-results"},"Cargando. Espera, por favor."):r.a.createElement("div",{className:"movie__details"},r.a.createElement("h1",{className:"movie__title"},e.title),r.a.createElement("div",{className:"movie__img-container"},r.a.createElement("img",{className:"movie__img",src:e.poster_path?"https://image.tmdb.org/t/p/w500".concat(e.poster_path):_.a,alt:e.title})),this.state.toggle?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleAddMovie},r.a.createElement("input",{id:"new",className:"movie__radio",type:"radio",name:"collection",value:this.state.newCollection,onChange:this.handleOptionChange,checked:"new"===this.state.selectedOption}),r.a.createElement("label",{htmlFor:"new"}," A\xf1adir a nueva colecci\xf3n: "),r.a.createElement("input",{className:"text-input",type:"text",name:"collection-name",value:this.state.newCollection,onChange:this.handleInputChange}),r.a.createElement("br",null),""!==this.state.existingCollection?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{id:"existing",className:"movie__radio",type:"radio",name:"collection",value:this.state.existingCollection,onChange:this.handleOptionChange,checked:"existing"===this.state.selectedOption}),r.a.createElement("label",{htmlFor:"existing"}," A\xf1adir a colecci\xf3n existente: "),r.a.createElement("select",{className:"text-input",onChange:this.handleSelectChange},JSON.parse(localStorage.getItem("collections")).map(function(e,t){return r.a.createElement("option",{key:t,value:e.name},e.name)}))):null,r.a.createElement("br",null),r.a.createElement("button",{className:"button",type:"submit"},"A\xf1adir"),r.a.createElement("button",{className:"button",onClick:this.handleToggle},"Cancelar"))):r.a.createElement("button",{type:"submit",className:"button",onClick:this.handleToggle},"A\xf1adir a mis favoritos"),r.a.createElement("div",{className:"movie__overview"},r.a.createElement("p",{className:"movie__detail"},r.a.createElement("strong",null,"Nacionalidad:")," ",e.production_countries.map(function(e){return e.name}).join(", ")),r.a.createElement("p",{className:"movie__detail"},r.a.createElement("strong",null,"G\xe9neros:")," ",e.genres.map(function(e){return e.name}).join(", ")),r.a.createElement("h2",{className:"movie__overview-title"},"Sinopsis:"),r.a.createElement("p",null,e.overview))))}}]),t}(r.a.Component)),A=(a(38),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collections:JSON.parse(localStorage.getItem("collections")),name:""},a.handleChange=function(e){a.setState({name:e.target.value})},a.handleSubmit=function(){var e=Object(E.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==a.state.name){e.next=3;break}return e.abrupt("return");case 3:if(!(n=JSON.parse(localStorage.getItem("collections"))).find(function(e){return e.name===a.state.name})){e.next=7;break}return alert("Error: Coleccci\xf3n duplicada. No se ha creado ninguna colecci\xf3n"),e.abrupt("return");case 7:n.push({id:n.length,name:a.state.name,movies:[]}),localStorage.setItem("collections",JSON.stringify(n)),a.setState({collections:n,name:""});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"text-input",type:"text",value:this.state.name,placeholder:"Nombre...",onChange:this.handleChange}),r.a.createElement("button",{className:"button",type:"submit"},"Crear colecci\xf3n")),r.a.createElement("ul",{className:"collection-list__container"},this.state.collections.map(function(e){return r.a.createElement("li",{key:e.id,className:"collection-list__item"},r.a.createElement(S.a,{className:"link",to:"/collection/".concat(e.id)},e.name))})))}}]),t}(r.a.Component)),P=(a(39),a(40),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:"Sin nota"===a.props.movieRating?0:a.props.movieRating,toggle:!1},a.handleChange=function(e){a.setState({value:e.target.value})},a.handleToggle=function(){a.setState({toggle:!a.state.toggle})},a.addRating=function(e){e.preventDefault(),a.handleToggle();var t=JSON.parse(localStorage.getItem("ratings"));t.find(function(e){return e.id===a.props.movieId})?t.find(function(e){return e.id===a.props.movieId}).value=parseInt(a.state.value):t.push({id:a.props.movieId,value:parseInt(a.state.value)}),localStorage.setItem("ratings",JSON.stringify(t)),a.props.onAddRating(t)},a.deleteMovie=function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("collections")),n=t.find(function(e){return e.id===a.props.collectionId}),r=n.movies.find(function(e){return e.id===a.props.movieId}),c=t.indexOf(n),s=n.movies.indexOf(r);t[c].movies.splice(s,1),localStorage.setItem("collections",JSON.stringify(t)),a.props.onDeleteMovie(n)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.movieRating,t="Sin nota"===e?"Puntuar":"Cambiar nota";return r.a.createElement("div",{className:"movie-settings__container"},r.a.createElement("div",{className:"movie-settings__rating"},"NOTA: ",e),this.state.toggle?r.a.createElement("form",{onSubmit:this.addRating},r.a.createElement("input",{className:"movie-settings__rating",type:"number",max:"10",min:"0",value:this.state.value,onChange:this.handleChange}),r.a.createElement("button",{className:"button",type:"submit"},t)):r.a.createElement("button",{type:"submit",className:"button",onClick:this.handleToggle},t),r.a.createElement("button",{type:"submit",className:"button"},r.a.createElement(S.a,{className:"link",to:"/movie/".concat(this.props.movieId)},"Ver detalles")),r.a.createElement("button",{type:"submit",className:"button",onClick:this.deleteMovie},"Borrar de la colecci\xf3n"))}}]),t}(r.a.Component)),R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collection:JSON.parse(localStorage.getItem("collections")).find(function(e){return e.id===parseInt(a.props.match.params.id)}),ratings:JSON.parse(localStorage.getItem("ratings"))},a.handleAddRating=function(e){a.setState({ratings:e})},a.handleDeleteMovie=function(e){a.setState({collection:e})},a.handleDeleteCollection=function(){var e=JSON.parse(localStorage.getItem("collections"));e=e.filter(function(e){return e.id!==a.state.collection.id}),localStorage.setItem("collections",JSON.stringify(e)),a.setState({collection:null})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.collection,a=this.state.ratings;return this.state.collection?r.a.createElement("div",{className:"collection__container"},r.a.createElement("div",{className:"collection__header"},r.a.createElement("h1",{className:"collection__name"},t.name),r.a.createElement("button",{className:"button",onClick:this.handleDeleteCollection},"Eliminar colecci\xf3n")),0===t.movies.length?r.a.createElement("div",{className:"no-results"},"Colecci\xf3n sin contenido. A\xf1ade pel\xedculas, por favor"):t.movies.map(function(n,c){return r.a.createElement("li",{key:c,className:"collection__movie"},r.a.createElement("div",{className:"collection__img-container"},r.a.createElement("img",{className:"collection__img",src:n.poster_path?"https://image.tmdb.org/t/p/w185".concat(n.poster_path):_.a,alt:n.title})),r.a.createElement("div",{className:"collection__main-info"},r.a.createElement("h2",{className:"collection__title"},n.title),r.a.createElement("div",{className:"collection__overview"},n.overview)),r.a.createElement(P,{collectionId:t.id,movieId:n.id,movieRating:a.find(function(e){return e.id===n.id})?a.find(function(e){return e.id===n.id}).value:"Sin nota",onAddRating:e.handleAddRating,onDeleteMovie:e.handleDeleteMovie}))})):r.a.createElement("div",{className:"no-results"},"La colecci\xf3n no existe")}}]),t}(r.a.Component),D=function(){return r.a.createElement("div",{className:"no-results"},"P\xe1gina no encontrada")},M=(a(41),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{basename:""},r.a.createElement("div",{className:"App"},r.a.createElement(v,null),r.a.createElement(p.a,null,r.a.createElement(d.a,{exact:!0,path:"/",component:x}),r.a.createElement(d.a,{exact:!0,path:"/search",component:j}),r.a.createElement(d.a,{exact:!0,path:"/collections",component:A}),r.a.createElement(d.a,{path:"/movie/:id",component:J}),r.a.createElement(d.a,{path:"/collection/:id",component:R}),r.a.createElement(d.a,{component:D}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[22,1,2]]]);
//# sourceMappingURL=main.07ad3497.chunk.js.map